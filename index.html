<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediaPipe Hands with Error Handling</title>
    <style>
        #error-message {
            display: none;
            position: fixed;
            top: 20px;
            left: 10px;
            right: 10px;
            background: rgba(255, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            font-size: 14px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <video id="input_video" autoplay></video>
    <canvas id="output_canvas" width="1280" height="720"></canvas>
    <div id="error-message"></div>
    <script>
        const videoElement = document.getElementById('input_video');
        const errorElement = document.getElementById('error-message');

        function showError(message) {
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }

        // Check for camera support
        if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
            showError('Your browser does not support camera access. Please use a modern browser like Chrome or Firefox.');
        } else {
            navigator.mediaDevices.enumerateDevices()
                .then(devices => {
                    const hasCamera = devices.some(device => device.kind === 'videoinput');
                    if (!hasCamera) {
                        showError('No camera found. Please use a device with a camera.');
                    } else {
                        // Initialize MediaPipe Hands
                        const hands = new Hands({ locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}` });
                        hands.onError(error => {
                            showError('Failed to initialize MediaPipe. Please check your internet connection and try again.');
                        });

                        // Set up camera
                        const camera = new Camera(videoElement, {
                            onFrame: async () => {
                                await hands.send({ image: videoElement });
                            },
                            width: 1280,
                            height: 720
                        });
                        camera.start();
                    }
                });
        }

        // Handle camera access errors
        videoElement.addEventListener('error', (error) => {
            showError('Camera access denied. Please allow camera access to use this feature.');
        });
    </script>
</body>
</html>
